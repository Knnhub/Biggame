<app-navbar></app-navbar>

<div class="profile-page">
  <div class="profile-container">

    <div class="profile-banner">
      <img class="profile-image" [src]="user?.imageUser || 'assets/default-avatar.png'" alt="Profile Image">
      <div class="profile-info">
        <h2 class="profile-name">{{ user?.full_name || 'No Name' }}</h2>
        <p class="profile-email">{{ user?.email || 'No Email' }}</p>
        <a class="edit-profile-button" [routerLink]="['/editprofile', user?.uid]">
          <span>Edit Profile</span>
        </a>
      </div>
    </div>

    <div class="wallet-card">
  <h3 class="wallet-title">ยอดเงินคงเหลือ</h3>
  <div class="wallet-balance">
    {{ wallet?.cash | number:'1.2-2' }} ฿
  </div>

  <button class="add-funds-button" (click)="openAddFundsModal()">เติมเงิน</button>

</div>
<div *ngIf="isAddFundsModalVisible" class="modal-overlay" (click)="closeAddFundsModal()">
  
  <div class="modal-content" (click)="$event.stopPropagation()">
    
    <h3 class="modal-title">เลือกจำนวนเงินที่ต้องการเติม</h3>

    <div class="amount-options">
      <button 
        *ngFor="let amount of predefinedAmounts"
        [class.selected]="amount === selectedAmount" 
        (click)="selectAmount(amount)">
        {{ amount | number }} ฿
      </button>
    </div>

    <p class="custom-amount-label">หรือกรอกจำนวนเงิน:</p>

    <input 
      type="number"
      class="custom-amount-input"
      placeholder="เช่น 150"
      [(ngModel)]="customAmount"
      (input)="clearSelectedAmount()">
    
    <div class="modal-actions">
      <button class="btn-cancel" (click)="closeAddFundsModal()">ยกเลิก</button>
      <button class="btn-confirm" (click)="confirmAddFunds()">ยืนยันการเติมเงิน</button>
    </div>

  </div>
</div>

  </div>

  <div class="library-section">
    <h3 class="library-title">Game Library</h3>
    <div class="game-grid-placeholder">
      <div class="game-placeholder"></div>
      <div class="game-placeholder"></div>
      <div class="game-placeholder"></div>
      <div class="game-placeholder"></div>
      <div class="game-placeholder"></div>
    </div>
  </div>

</div>