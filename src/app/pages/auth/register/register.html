<section class="register-page">
  <div class="card">
    <!-- Avatar uploader -->
    <label class="avatar-uploader" for="avatarInput" title="Upload avatar" tabindex="0">
      <ng-container *ngIf="!avatarImg; else preview">
        <svg width="64" height="64" viewBox="0 0 24 24" class="icon">
          <rect x="3" y="3" width="18" height="14" rx="2" ry="2" fill="none" stroke="#111" stroke-width="1.5" />
          <circle cx="9" cy="8" r="2" fill="none" stroke="#111" stroke-width="1.5" />
          <path d="M21 16l-5-5-6 6" fill="none" stroke="#111" stroke-width="1.5" />
        </svg>
        <span class="plus">+</span>
      </ng-container>
      <ng-template #preview>
        <img [src]="avatarImg!" alt="avatar" />
      </ng-template>
    </label>
    <input id="avatarInput" type="file" accept="image/*" (change)="onAvatarChange($event)" hidden />

    <form [formGroup]="form" (ngSubmit)="submit()" class="form">
      <label for="name">Name</label>
      <input id="name" type="text" formControlName="username" placeholder="Your name" />
      <div *ngIf="form.get('username')?.touched && form.get('username')?.invalid" class="error">
        Name is required
      </div>

      <label for="email">Email</label>
      <input id="email" type="email" formControlName="email" placeholder="Your email" />

      <label for="password">Password</label>
      <input id="password" type="password" formControlName="password" placeholder="Your password" />
      <div *ngIf="form.get('password')?.touched && form.get('password')?.invalid" class="error">
        Password is required
      </div>

      <button class="btn" type="submit" [disabled]="loading">
        {{ loading ? 'Registering...' : 'Register' }}
      </button>

      <p class="login-link">
        <span>*Already a member?</span>
        <a routerLink="/login">login</a>
      </p>
    </form>
  </div>
</section>